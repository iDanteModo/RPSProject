<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Function library example</title>
  <style>
  </style>
  </head>
<body>
<script>

    let result, choice, repeat = true;

    function greet() {
        alert("Welcome to my Rock & Paper & Scissors Game");
    }
    function computerChoice() {
        let result = Math.floor(Math.random() * 3);
        if (result == 0) {
            console.log("Computer chose Rock");
        } else if (result == 1) {
            console.log("Computer chose Paper");
        } else {
            console.log("Computer chose Scissors")
        }
        return result;

    }

    function humanChoice() {
        repeat = true;
        while(repeat) {
            choice = prompt("Choose ROCK PAPER SCISSORS");
            choice = choice.toLowerCase();
            if (choice == "rock" || choice == 'paper' || choice == 'scissors') {
                console.log(`You choose ${choice}`);
                return choice;
                repeat = false;
            } else {
                alert("Please choose only ROCK PAPPER SCISSORS");
            }
        }
        
    }

    function winner(result, choice) {
        let decision, reset = false;
        if (choice == 'rock' ) {
            choice = 0;
        } else if (choice == 'paper') {
            choice= 1;
        } else if (choice == 'scissors') {
            choice = 2;
        } else {
            alert("WHAT IS WRONG");
        }
        if (result == 0 && choice == 2) {
            decision = alert("Computer WINS");
        } else if (result == 1 && choice == 0){
            decision = alert("Computer WINS");
        } else if (result == 2 && choice == 1){
            decision = alert("Computer WINS");
        } else if(result == choice){
            decision = alert("DRAW");
            reset = true;
        } else if (choice == 0 && result == 2){
            decision = alert("YOU WIN");
        } else if (choice == 1 && result == 0) {
            decision = alert("YOU WIN");
        } else if (choice == 2 && result == 1) {
            decision = alert("YOU WIN");
        }else {
            decision = alert("NOT WORKING");
        }

        
        return decision;

        
    }

    function playAgain() {
        while(repeat) {
            goagain = prompt("PLAY AGAIN?")
            goagain = goagain.toLowerCase();
            if( goagain == "no"){
                repeat = false; 
                return alert("See you next time");
            } else if (goagain == 'yes') {
                choice = humanChoice();
                result= computerChoice();
                winner(result, choice); 
                repeat = true;
            } else {
                alert("ONLY YES OR NO ANSWER");
            }
        }

    }

    function playGame(){
        greet();
        choice = humanChoice();
        result= computerChoice();
        winner(result, choice);
        playAgain();
    }
    
    playGame();
    
</script>
</body>
</html>